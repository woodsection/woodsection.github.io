[ { "title": "Maven Local", "url": "/posts/maven-local/", "categories": "Web, Java, Build", "tags": "Web", "date": "2022-09-18 17:16:00 +0900", "snippet": "ê°œìš”spring ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ë ˆê±°ì‹œ í”„ë¡œì íŠ¸ë¥¼ ì‚´í´ë³´ë‹¤ê°€, íŒ¨í‚¤ì§€ë¥¼ ê°€ì ¸ì˜¬ë•Œ maven repoê°€ ì•„ë‹Œ ë¡œì»¬ì—ì„œ ë¹Œë“œí•´ë‘” jar íŒŒì¼ì„ import í•´ì˜¤ëŠ” êµ¬ë¬¸ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.ì‚´í´ë³´ë˜ í”„ë¡œì íŠ¸ëŠ” msaì—ì„œ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ ë¶€ë¶„ì´ì˜€ëŠ”ë°, êµ¬ê¸€ protobufë¡œ ë§Œë“¤ì–´ë‘” dto í´ë˜ìŠ¤ ëª¨ìŒ í”„ë¡œì íŠ¸ë¥¼ ë¡œì»¬ì— jarë¡œ ë¹Œë“œí•˜ê³  í•´ë‹¹ jarì„ ê° í”„ë¡œì íŠ¸ë§ˆë‹¤ ë¡œì»¬ì—ì„œ import í•´ì™€ ì‚¬ìš©í•˜ëŠ” í˜•íƒœë¡œ êµ¬ì„±ë˜ì–´ìˆì—ˆìŠµë‹ˆë‹¤.íŒ¨í‚¤ì§€ë¥¼ import í•´ì˜¬ë•Œ repo ê°™ì€ ì„¤ì •ì€ í¬ê²Œ ì‹ ê²½ì“°ì§€ ì•Šì•˜ë˜ ë¶€ë¶„ì¸ë°, ì´ë²ˆ ê¸°íšŒì— ê°„ë‹¨í•˜ê²Œë‚˜ë§ˆ ì •ë¦¬í•´ë‘ë ¤ê³ í•©ë‹ˆë‹¤.gradle ë¹Œë“œgradleì—ì„œ ë¡œì»¬ì˜ maven ì €ì¥ì†Œë¡œ ë¹Œë“œí•˜ëŠ” ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤.gradle publishToMavenLocalrepo ì„¤ì •í™•ì¸í”„ë¡œì íŠ¸ ë¹Œë“œëŠ” gradleë¡œ ì§„í–‰í•œë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.build.gradle...repositories { mavenLocal() mavenCentral()Â Â ...}...build.gradle íŒŒì¼ì„ ì‚´í´ë³´ë©´ repositoriesë¥¼ ì„¤ì •í•˜ëŠ” í•„ë“œê°€ ìˆëŠ”ë°, í•´ë‹¹ ë¶€ë¶„ì— mavenCentral, mavenLocalì´ ìˆìŠµë‹ˆë‹¤.mavenLocal ì´ ì„¤ì •ë˜ì–´ìˆìœ¼ë©´ ë¡œì»¬ì— ìˆëŠ” íŒ¨í‚¤ì§€ë¥¼ import í•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë©ë‹ˆë‹¤.dependencies ì„í¬íŠ¸macê¸°ì¤€ defaultë¡œ ~/.m2/repository pathì— packageë“¤ì´ ì €ì¥ë˜ë©°, ê° ë””ë ‰í† ë¦¬ë§ˆë‹¤ . ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ gradleì˜ dependencies í•„ë“œì— ì¶”ê°€í•´ì¤ë‹ˆë‹¤.dependencies {Â Â Â Â ...Â Â Â Â implementation \"com.woodsection.test.application:0.0.1\"Â Â Â Â ...}" }, { "title": "curl ì»¤ë§¨ë“œì˜ --user ì˜µì…˜", "url": "/posts/curl/", "categories": "Linux", "tags": "Linux, Command", "date": "2022-09-18 16:16:00 +0900", "snippet": "Curl ì»¤ë§¨ë“œcurl ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©ë˜ë©° ê¸°ë³¸ì ìœ¼ë¡œ REST ì„œë¹„ìŠ¤ë¡œ api ìš”ì²­ í…ŒìŠ¤íŠ¸ë“±ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.curl [options] &lt;url&gt;â€“user ì˜µì…˜api testë¥¼ ìœ„í•´ì„œ curl ëª…ë ¹ì–´ READMEë¥¼ ì‘ì„±í•˜ë‹¤ê°€ ì°¾ê²Œëœ ë‚´ìš©ì¤‘ì— ìƒì†Œí•œ --user ì˜µì…˜ì´ ìˆì–´ í•´ë‹¹ë‚´ìš©ì— ëŒ€í•´ ê°„ë‹¨íˆ ê¸°ë¡í•˜ë ¤ê³ í•©ë‹ˆë‹¤.-u , --user ì˜µì…˜ì„ í†µí•´ ìœ ì €ì˜ ê³„ì •ì •ë³´ë¥¼ ë‹´ì•„ì„œ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ë³´ë‚´ëŠ” ê²ƒê³¼ ê°™ì´ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤.#curl -u &lt;username:userpassword&gt; &lt;url&gt;curl -u testuser:userpassword https://test.com" }, { "title": "Istio ì—ì„œì˜ authentication", "url": "/posts/istio-security-authentication/", "categories": "Infra, Istio, Security", "tags": "ServiceMesh, Istio, Kubernetes", "date": "2022-07-26 22:32:00 +0900", "snippet": "Authentication (ì¸ì¦)ê¸°ë³¸ ì»¨ì…‰Istioì—ì„œëŠ” ë‘ ê°€ì§€ authentication(ì¸ì¦) ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤. Peer authenticaion í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²°ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ì„œë¹„ìŠ¤ê°„ ì¸ì¦ì— ì‚¬ìš©ë˜ëŠ” ì¸ì¦ë°©ì‹ì…ë‹ˆë‹¤. Istioì—ì„œëŠ” ì„œë¹„ìŠ¤ ì½”ë“œì˜ ë³€ê²½ì—†ì´ í™œì„±í™”ê°€ëŠ¥í•œ ìƒí˜¸ê°„ TLSë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ê°„ í†µì‹  ë³´í˜¸ í´ëŸ¬ìŠ¤í„° - í´ë¼ìš°ë“œ ì‚¬ì´ì— ìš´ìš©ê°€ëŠ¥í•œ IDë¥¼ ê° ì„œë¹„ìŠ¤ì— ì œê³µ í‚¤, ì¸ì¦ì„œë¥¼ ìƒì„± ë° ë°°í¬, ìˆœí™˜ì„ ìë™í™”í•˜ëŠ” ì‹œìŠ¤í…œ ì œê³µ Request authentication end ìœ ì €ë¥¼ ìœ„í•œ ì‚¬ìš©ì ì¸ì¦ì— ì‚¬ìš©ë©ë‹ˆë‹¤.JWTë¥¼ ì´ìš©í•œ ìœ íš¨ì„± ê²€ì‚¬, ê¶Œí•œí™•ì¸ í˜¹ì€ OpenID Connect ê³µê¸‰ìë¥¼ ì‚¬ìš©í•´ ê°œë°œì í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.ì˜ˆì‹œë¡œ ORY Hydra, Keycloak, Auth0, Firebase Auth, Google Auth ë“± ..IstioëŠ” ì¸ì¦ì •ì±…ì€ Istio config storeì— k8s CRDë¥¼ ì´ìš©í•´ ì €ì¥í•˜ë©°, istiodëŠ” í‚¤ë¥¼ í†µí•´ ê°ê°ì˜ í”„ë¡ì‹œë¥¼ ìµœì‹  ì •ë³´ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.Mutual TLS authentication (ìƒí˜¸ê°„ TLS ì¸ì¦)Istioì—ì„œëŠ” Envoy í”„ë¡ì‹œë¡œ êµ¬í˜„í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì¸¡ì˜ PEPë¥¼ ì´ìš©í•´ ì„œë¹„ìŠ¤ê°„ í†µì‹ ì„ í„°ë„ë§í•©ë‹ˆë‹¤.Mutual TLS ì¸ì¦ìœ¼ë¡œ ë‹¤ë¥¸ ì›Œí¬ë¡œë“œì— request í• ë•Œì˜ ë™ì‘ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì˜ ë¡œì»¬ ì‚¬ì´ë“œì¹´ Envoyë¡œ ì•„ì›ƒë°”ìš´ë“œë¥¼ ë‹¤ì‹œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ Envoyì™€ ì„œë²„ Envoyê°€ TLS handshakeë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. í•¸ë“œì‰ì´í¬ê°€ ì¼ì–´ë‚˜ëŠ”ë™ì•ˆ, í´ë¼ì´ì–¸íŠ¸ Envoy ì—ì„œëŠ” secure naming ê²€ì‚¬ë¥¼ í†µí•´ ì„œë²„ ì¸ì¦ì„œì˜ service accountê°€ ëŒ€ìƒì˜ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê° EnvoyëŠ” TLS ì—°ê²°ì„ ì„¤ì •í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì˜ EnvoyëŠ” ì„œë²„ì˜ Envoyë¡œ íŠ¸ë˜í”½ì„ ì „ë‹¬í•©ë‹ˆë‹¤. ì„œë²„ Envoyê°€ ìš”ì²­ì„ ìŠ¹ì¸í•˜ê³ , ë¡œì»¬ TCP ì—°ê²°ë¡œ íŠ¸ë˜í”½ì„ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.Permissive mode (í—ˆìš©ëª¨ë“œ)ì„œë¹„ìŠ¤ê°€ ì¼ë°˜ íŠ¸ë˜í”½ê³¼ Mutual TLS íŠ¸ë˜í”½ì„ ëª¨ë‘ ìˆ˜ë½í•  ìˆ˜ ìˆëŠ” ëª¨ë“œì…ë‹ˆë‹¤.Secure namingserver identityëŠ” ì¸ì¦ì„œë¡œ ì¸ì½”ë”©ë˜ì§€ë§Œ, ì„œë¹„ìŠ¤ì˜ ì´ë¦„ì€ ì„œë¹„ìŠ¤ë‚˜ DNSë¥¼ í†µí•´ ê²€ìƒ‰ë©ë‹ˆë‹¤.secure namingì€ server indentityë¥¼ ì„œë¹„ìŠ¤ ì´ë¦„ì— ë§¤í•‘í•˜ë©°, ì´ëŠ” server identityê°€ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰í•  ê¶Œí•œì´ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ apiserverë¥¼ ê°ì‹œí•˜ê³  sercure namingì„ ìƒì„±í•˜ì—¬ PEPì— ë°°í¬í•©ë‹ˆë‹¤.ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí• ë•Œ, ì¸ì¦ì„œì—ì„œ IDë¥¼ ì¶”ì¶œí•˜ê³ , secure namingê³¼ ë¹„êµí•˜ì—¬ ë´„ìœ¼ë¡œì„œ ì„œë¹„ìŠ¤ ì‹¤í–‰ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ê²€ì¦í•˜ë¯€ë¡œ, secure namingì„ í†µí•´ DNS spoofing, BGP/route hijacking, ARP spoofing ë“±ì˜ ê³µê²©ìœ¼ë¡œë¶€í„° ë³´í˜¸í•  ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ì´ë©ë‹ˆë‹¤.Authentication architecture (ì¸ì¦ ì•„í‚¤í…ì²˜)peerì™€ authorization policyë¥¼ ì‚¬ìš©í•´ì„œ ì›Œí¬ë¡œë“œì— ëŒ€í•œ ì¸ì¦ ì„¤ì •ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.yaml íŒŒì¼ì„ í†µí•´ policyë¥¼ ì§€ì •í•˜ê³  ì •ì±…ì´ ë°°í¬ë˜ë©´ istio êµ¬ì„± ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë˜ë©°, istio controllerì—ì„œ êµ¬ì„± ìŠ¤í† ë¦¬ì§€ë¥¼ ê°ì‹œí•©ë‹ˆë‹¤.policyì˜ ë³€ê²½ì‹œ istioëŠ” ë³€ê²½ëœ policyë¥¼ ì—”ë“œí¬ì¸íŠ¸ì— ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ë³´ë‚´ê³ , í”„ë¡ì‹œê°€ ìˆ˜ì‹ í•˜ë©´ í•´ë‹¹ policyê°€ í¬ë“œì— ì¦‰ì‹œ ì ìš©ë©ë‹ˆë‹¤.ì´ëŸ¬í•œ ìš”ì²­ì€ ë‹¤ìŒê³¼ ê°™ì€ ì•„í‚¤í…ì²˜ë¥¼ í†µí•´ ì´ë¤„ì§‘ë‹ˆë‹¤.Authentication policies (ì¸ì¦ì •ì±…)ì¸ì¦ì •ì±…ì€ ì„œë¹„ìŠ¤ê°€ ìˆ˜ì‹ í•˜ëŠ” requestì— ì ìš©ë˜ë©°, mutural TLSì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì˜ ì¸ì¦ ê·œì¹™ì„ ì§€ì •í•˜ê¸° ìœ„í•´ì„  DestinationRule ì„ ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤.ì•ì„œ ì´ì•¼ê¸°í–ˆë“¯ì´ yaml íŒŒì¼ í˜•ì‹ìœ¼ë¡œ k8sì˜ CRDë¥¼ í†µí•´ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.apiVersion: security.istio.io/v1beta1kind: PeerAuthenticationmetadata: name: \"example-peer-policy\" namespace: \"foo\"spec: selector: matchLabels: app: reviews mtls: mode: STRICTPolicy storage (ì •ì±… ì €ì¥)istio root ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— mesh-scope policyë¥¼ ì €ì¥í•©ë‹ˆë‹¤.ì´ ì •ì±…ì€ ì „ì—­ì ìœ¼ë¡œ ì„¤ì •ë˜ë©°, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì§€ì •í•˜ì—¬ policyë¥¼ ì €ì¥í•˜ë©´, í•´ë‹¹ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ì˜ ì›Œí¬ë¡œë“œë‚´ì—ì„œë§Œ ì ìš©ì´ ë©ë‹ˆë‹¤.selector í•„ë“œë¥¼ ì´ìš©í•˜ì—¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.Selector fieldë‹¤ìŒê³¼ ê°™ì´ selector í•„ë“œë¥¼ ì´ìš©í•´ ì •ì±…ì´ ì ìš©ë˜ëŠ” ì›Œí¬ë¡œë“œ ë ˆì´ë¸”ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.selector: matchLabels: app: product-page selector í•„ë“œì— ê°’ì´ ì—†ìœ¼ë©´, ë£¨íŠ¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•´ ì§€ì •ëœ ì •ì±…ì´ ì ìš©ë©ë‹ˆë‹¤.ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ê° ì›Œí¬ë¡œë“œì— ì •ì±…ì„ ì ìš©í•©ë‹ˆë‹¤. ì›Œí¬ë¡œë“œë³„ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì „ì²´ ë©”ì‰¬ ì „ì²´ì •ì±…ì´ ì—¬ëŸ¬ê°€ì§€ê°€ ì ìš©ë˜ë©´, ëª¨ë“  ì •ì±…ì„ ê²°í•©í•´ì„œ ì ìš©ë˜ë¯€ë¡œ ì—¬ëŸ¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ì •ì±…ì„ ê°€ì§ˆìˆ˜ë„ ìˆì§€ë§Œ ê¶Œì¥í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.Peer authentication (í”¼ì–´ ì¸ì¦)í”¼ì–´ì¸ì¦ì—ì„œëŠ” mutural TSL ëª¨ë“œë¥¼ ì§€ì •í•˜ë©°, ì§€ì›ë˜ëŠ” ëª¨ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. PERMISSIVE(í—ˆìš©) Mutural TSL, ì¼ë°˜ íŠ¸ë˜í”½ ëª¨ë‘ í—ˆìš©í•˜ë©°, ì‚¬ì´ë“œì¹´ê°€ ì—†ëŠ” ì›Œí¬ë¡œë“œì—ì„œ ì‚¬ìš©í•˜ê¸°ì— ì í•©í•©ë‹ˆë‹¤. ì‚¬ì´ë“œì¹´ê°€ ì ìš©ì´ ëœ í›„ì—ëŠ” STRICT ëª¨ë“œë¡œ ë³€ê²½í•´ì•¼í•©ë‹ˆë‹¤. STRICT(ì—„ê²©) Mutural TSLë§Œì„ í—ˆìš©í•©ë‹ˆë‹¤. DISABLE(ë¹„í™œì„±í™”) Mutural TSLì´ ë¹„í™œì„±í™”ë˜ë¯€ë¡œ ìì²´ì ì¸ ë³´ì•ˆ ì†”ë£¨ì…˜ì´ ì—†ë‹¤ë©´ ë¹„í™œì„±í™”ëª¨ë“œë¥¼ ì‚¬ìš©í•´ì„  ì•ˆë©ë‹ˆë‹¤. ëª¨ë“œê°€ ì ìš©ë˜ì§€ì•Šìœ¼ë©´ ìƒìœ„ì˜ ëª¨ë“œê°€ ìƒì†ë˜ë©°, ìƒì†ë  ëª¨ë“œë„ ì—†ë‹¤ë©´ PERMISSIVE ëª¨ë“œë¡œ ì ìš©ë©ë‹ˆë‹¤.ë‹¤ìŒì˜ ì„¤ì •ì—ì„  foo ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì˜ ì›Œí¬ë¡œë“œì—ê²Œ STRICT ëª¨ë“œê°€ ì ìš©ë©ë‹ˆë‹¤.apiVersion: security.istio.io/v1beta1kind: PeerAuthenticationmetadata: name: \"example-policy\" namespace: \"foo\"spec: mtls: mode: STRICTíŠ¹ì • í¬íŠ¸ë§Œì„ ì§€ì •í•˜ì—¬ ëª¨ë“œë¥¼ ì§€ì •í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.ë‹¤ìŒì˜ ì„¤ì •ì—ì„  foo ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì†í•˜ëŠ” 80 í¬íŠ¸ì˜ ì›Œí¬ë¡œë“œì—ì„œ Mutural TSLì„ ë¹„í™œì„±í™”í–ˆìŠµë‹ˆë‹¤.apiVersion: security.istio.io/v1beta1kind: PeerAuthenticationmetadata: name: \"example-workload-policy\" namespace: \"foo\"spec: selector: matchLabels: app: example-app portLevelMtls: 80: mode: DISABLEë‹¤ìŒì˜ êµ¬ì„±ì—ì„  Mutural TSLì´ ë¹„í™œì„±í™”ëœ 80 í¬íŠ¸ë¡œ ë°”ì¸ë”©ë˜ë¯€ë¡œ ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.apiVersion: v1kind: Servicemetadata: name: example-service namespace: foospec: ports: - name: http port: 8000 protocol: TCP targetPort: 80 selector: app: example-appRequest authenticationJWTì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê°’ì„ ì§€ì •í•˜ë©°, ê·¸ ê°’ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. requestì—ì„œì˜ tokenì˜ ìœ„ì¹˜ issuerì™€ request ê³µê°œ JSON ì›¹ í‚¤ set(JWKS)istioì—ì„œ ê·œì¹™ì— ë”°ë¼ í† í°ì„ í™•ì¸í•˜ê³  ìœ íš¨ì„± ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.requestì— tokenì´ ì—†ìœ¼ë©´, ê¸°ë³¸ì ìœ¼ë¡œ í—ˆìš©ë˜ë©°, í† í°ì´ ì—†ëŠ” ìš”ì²­ì„ ê±°ë¶€í•˜ë ¤ë©´ path, action ë“±ì„ ì§€ì •í•˜ëŠ” ê·œì¹™ì„ ì§€ì •í•´ì•¼í•©ë‹ˆë‹¤.ë‘˜ ì´ìƒì˜ ì •ì±…ì´ ì›Œí¬ë¡œë“œì— ì ìš©ë˜ì–´ìˆë‹¤ë©´, ê° ì •ì±…ì— ë”°ë¼ ë‘˜ ì´ìƒì˜ JWTë¥¼ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¨ì¼ ì •ì±…ì²˜ëŸ¼ ëª¨ë“  ê·œì¹™ì„ ê²°í•©í•©ë‹ˆë‹¤.í•˜ì§€ë§Œ, ë‘˜ ì´ìƒì˜ JWTê°€ ìˆëŠ” ìš”ì²­ì€ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.ì¦‰, ì •ì±…ì´ 2ê°œê°€ ì ìš©ëœ ì›Œí¬ë¡œë“œì— ëŒ€í•˜ì—¬ ê° ì •ì±…ì— ì ìš©ë˜ëŠ” JWT 1ê°œ ì”© ì´ 2ê°œëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ,ì •ì±…ì´ 2ê°œê°€ ì ìš©ëœ ì›Œí¬ë¡œë“œì— ëŒ€í•˜ì—¬ ê° ì •ì±…ì— ì ìš©ë˜ëŠ” JWT 2ê°œì”© ì´ 4ê°œëŠ” ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.Principalspeer authentication policy, mutural TLS ë“±ì„ ì‚¬ìš©í•  ë•Œ, identityë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ source.principal , request.auth.principal ë“±ê³¼ ê°™ì€ ë³´ì•ˆ ì£¼ì²´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.Updating authentication policies (ì¸ì¦ì •ì±… ì—…ë°ì´íŠ¸)authentication policyëŠ” ì–¸ì œë“  ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë©°, ê±°ì˜ ì‹¤ì‹œê°„ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.í•˜ì§€ë§Œ, ëª¨ë“  ì›Œí¬ë¡œë“œê°€ ìƒˆë¡œìš´ ì •ì±…ì„ ìˆ˜ì‹ í–ˆëŠ”ì§€ ë³´ì¥í•  ìˆœ ì—†ìŠµë‹ˆë‹¤.ë•Œë¬¸ì— istioì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê¶Œì¥í•©ë‹ˆë‹¤. ëª¨ë“œë¥¼ DISABLE â†’ STRICT ë˜ëŠ” ê·¸ ë°˜ëŒ€ì˜ ê²½ìš°ë¡œ ë³€ê²½í•˜ê³ ìí•œë‹¤ë©´, ì¤‘ê°„ì— PERMISSIVE ëª¨ë“œë¡œ ì§€ì •í•œ ë’¤ ë°”ê¿”ì•¼í•©ë‹ˆë‹¤. Istio telemetryë¥¼ í†µí•´ ëª¨ë“œê°€ ì„±ê³µì ìœ¼ë¡œ ë°”ë€Œì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. request authenticationì„ ë‹¤ë¥¸ jwtë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê³ ìí• ë•Œ, ì´ì „ ê·œì¹™ì„ ëƒ…ë‘” ìƒíƒœë¡œ ìƒˆ jwt ì •ì±…ì„ ì¶”ê°€í•œ ë’¤, ëª¨ë“  íŠ¸ë˜í”½ì´ ìƒˆë¡œìš´ jwtë¡œ ì ìš©ë˜ê³  ë‚œ ì´í›„ì— ì´ì „ ê·œì¹™ì„ ì œê±°í•´ì•¼í•©ë‹ˆë‹¤.ë‹¨, ìƒˆë¡œìš´ jwtëŠ” ì´ì „ì˜ jwtì™€ ë‹¤ë¥¸ ìœ„ì¹˜ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤." }, { "title": "Istioì˜ Security", "url": "/posts/istio-security/", "categories": "Infra, Istio, Security", "tags": "ServiceMesh, Istio, Kubernetes", "date": "2022-07-25 23:05:00 +0900", "snippet": "ë³´ì•ˆ(Security)istioë¥¼ ì‚¬ìš©í–ˆì„ ë•Œì˜ ë³´ì•ˆì ì¸ íŠ¹ì§• ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì¸í”„ë¼ ì½”ë“œì˜ ìˆ˜ì •ì—†ì´ ê¸°ë³¸ì ìœ¼ë¡œ ë³´ì•ˆì´ ì ìš©ë¨ ê¸°ì¡´ ë³´ì•ˆ ì‹œìŠ¤í…œê³¼ í†µí•©í•˜ì—¬ ë³´ì•ˆ ì ìš© ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ë„¤íŠ¸ì›Œí¬ì—ë„ ë³´ì•ˆì„ ì ìš©í•  ìˆ˜ ìˆìŒì•„í‚¤í…ì³ CA(Certificate Authority) keyì™€ ì¸ì¦ ê´€ë¦¬ ì„¤ì • API ì„œë²„ì—ì„œ í”„ë¡ì‹œë¡œ ì •ì±…ì„ ì „ë‹¬í•¨ authentication policies(authentication policies) authorization policies(authorization policies) secure naming information(secure naming information) ì‚¬ì´ë“œì¹´ì™€ perimeter í”„ë¡ì‹œëŠ” PEPsì— ë”°ë¼ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ì— ì•ˆì „í•œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ Envoy proxy í™•ì¥ì„¸íŠ¸ëŠ” ì›ê²©ì¸¡ì •ê³¼ ê°ì‹œë¥¼ ê´€ë¦¬í•¨ control planeì—ì„œ APIì„œë²„ì™€ PEPsì— ë”°ë¥¸ data planeì„ ê´€ë¦¬ PEPsëŠ” Envoyë¥¼ í†µí•´ êµ¬í˜„ë¨Istio identityì›Œí¬ë¡œë“œê°„ í†µì‹ ì„ ìœ„í•´ì„œëŠ” ê°ìê°€ ì‹ ìš©í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì„œë¡œì˜ credentialì„ êµí™˜í•´ì•¼í•¨í´ë¼ì´ì–¸íŠ¸ì„œë²„ì˜ IDê°€ **secure namingì„ í†µí•´ ì›Œí¬ë¡œë“œì— ì¸ì¦ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•¨ì„œë²„ì„œë²„ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ íŠ¹ì • ì •ë³´ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ authorization policiesë¥¼ í†µí•´ í™•ì¸í•¨ëˆ„ê°€ ì–¸ì œ ì•¡ì„¸ìŠ¤í–ˆëŠ”ì§€, ì›Œí¬ë¡œë“œë¥¼ ì‚¬ìš©í•œ ê²ƒì— ëŒ€í•œ ë¹„ìš© ë¶€ê³¼, ë¹„ìš©ì„ ì§€ë¶ˆí•˜ì§€ ëª»í•œ í´ë¼ì´ì–¸íŠ¸ì˜ ê±°ë¶€ ë“±ì„ ìˆ˜í–‰í•¨istio identityëŠ” ì²«ë²ˆì§¸ë¡œ service identity ë¥¼ request originì˜ identityë¥¼ ê²°ì •í•¨ë§¤ìš° ìœ ì—°í•˜ê³  ì„¸ë¶„í™”ëœ service identitiesë¥¼ ê°œì¸, ê·¸ë£¹ ìœ ì €ì—ê²Œ ì œê³µí•´ì¤ŒistioëŠ” service identity ê°€ ì—†ëŠ” í”Œë«í¼ì—ì„  ì—¬ëŸ¬ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ identityë¥¼ ê²°ì •í•˜ëŠ”ë°, ê·¸ ëª©ë¡ì€ ë‹¤ìŒê³¼ ê°™ìŒ K8s â†’ kubernetes service account GCE â†’ GCP service account On-promises(non-k8s) â†’ user account, custom service account, service name, istio service account, or GCP service accountIdentity and certificate management(ì‹ ì›, ì¸ì¦ê´€ë¦¬)ëª¨ë“  ì›Œí¬ë¡œë“œì—ì„œ X.509 certificateë¥¼ ì‚¬ìš© istiod ì—ì„œ CSRì„ ë°›ëŠ” gRPC ì„œë¹„ìŠ¤ë¥¼ ì œê³µ [istio-agent â†’ istiod] private key, CSR ì „ì†¡ [istiod] istioì˜ Certificate Authorityë¥¼ í†µí•´ ì¸ì¦ì„œ ë°œê¸‰ ì›Œí¬ë¡œë“œê°€ ì‹œì‘ë˜ë©´ EnvoyëŠ” SDS APIë¥¼ í†µí•´ istio-agentì— ì¸ì¦ì„œì™€ í‚¤ë¥¼ ìš”ì²­í•¨ istio-agentëŠ” istiod ë¡œë¶€í„° ë°›ì€ ì¸ì¦ì„œì™€ í‚¤ë¥¼ SDS apië¥¼ í†µí•´ envoyë¡œ ì „ì†¡ istio-agent ì—ì„œ ì›Œí¬ë¡œë“œ ì¸ì¦ì„œì˜ ë§Œë£Œì—¬ë¶€ë¥¼ ëª¨ë‹ˆí„°ë§í•¨ ìœ„ì˜ ê³¼ì •ë“¤ì´ ë°˜ë³µë˜ë©° ì¸ì¦ì„œì™€ í‚¤ê°€ ìˆœí™˜ë¨" }, { "title": "Mavenì´ë€ ?", "url": "/posts/maven/", "categories": "Web, Java, Build", "tags": "Web", "date": "2022-07-17 01:16:00 +0900", "snippet": "MavenMavenì´ë€ Javaìš© í”„ë¡œì íŠ¸ ê´€ë¦¬ë„êµ¬ë¡œ Apache Antì˜ ëŒ€ì•ˆìœ¼ë¡œ ë§Œë“¦ í”„ë¡œì íŠ¸ ì „ì²´ì ì¸ Life Cycle ê´€ë¦¬ë„êµ¬ pom.xmlì„ ì´ìš©í•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ dependency ë˜í•œ ì•Œì•„ì„œ ë‹¤ìš´ë¡œë“œ ì¤‘ì•™ ì €ì¥ì†Œë¥¼ í†µí•œ dependency ê´€ë¦¬(ì•„íŒŒì¹˜ì¬ë‹¨ ìš´ì˜) ìì²´ì  ì¤‘ì•™ ì €ì¥ì†Œ êµ¬ì¶• ê°€ëŠ¥ (local repo) ê°„ë‹¨ ì„¤ì •ìœ¼ë¡œ ë°°í¬ê´€ë¦¬ ê°€ëŠ¥Maven vs AntAnt ì „ì²˜ë¦¬, ì»´íŒŒì¼, íŒ¨í‚¤ì§•, í…ŒìŠ¤íŒ…, ë°°í¬Maven Life Cycleì— ë”°ë¼ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³ , ì „ë°˜ì  í”„ë¡œì íŠ¸ ê´€ë¦¬ê¸°ëŠ¥ì„ í¬í•¨ Build Tool + Project ManagementMaven Life CycleLife Cycle ë©”ì´ë¸ì€ í”„ë ˆì„ì›Œí¬ì´ë¯€ë¡œ ë™ì‘ë°©ì‹ì´ ì •í•´ì ¸ ìˆìŒ ì´ë¥¼ Life Cycleì´ë¼ê³  í•¨ 1 Validate í”„ë¡œì íŠ¸ ìœ íš¨ì„±, í•„ìš”í•œ ëª¨ë“  ì •ë³´ ì‚¬ìš©ê°€ëŠ¥ ì—¬ë¶€ ê²€ì¦ 2 Compile í”„ë¡œì íŠ¸ ì†ŒìŠ¤ì½”ë“œ ì»´íŒŒì¼ 3 Test ìœ ë‹›(ë‹¨ìœ„) í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ë‹¨ê³„, ì‹¤íŒ¨ì‹œ ë¹Œë“œ ì‹¤íŒ¨ì²˜ë¦¬, ìŠ¤í‚µê°€ëŠ¥ 4 Package ì»´íŒŒì¼ ì†ŒìŠ¤ì½”ë“œì™€ ë¦¬ì†ŒìŠ¤ë¥¼ jar, war ë“±ì˜ ë°°í¬ë¥¼ ìœ„í•œ íŒ¨í‚¤ì§€ë¡œ ë§Œë“¦ 5 Integration Test í†µí•© í…ŒìŠ¤íŠ¸ ë‹¨ê³„ 6 Verify í†µí•© í…ŒìŠ¤íŠ¸ ê²°ê³¼ì— ëŒ€í•œ ê²€ì‚¬. í’ˆì§ˆ ê¸°ì¤€ ì¶©ì¡± ê²€ì¦ 7 Install íŒ¨í‚¤ì§€ë¥¼ ë¡œì»¬ ì €ì¥ì†Œì— ì„¤ì¹˜ 8 Deploy ë§Œë“  íŒ¨í‚¤ì§€ë¥¼ ì›ê²© ì €ì¥ì†Œì— release Phase(ë‹¨ê³„) Life Cycleì˜ ê° ë‹¨ê³„(Validate, Compile â€¦)ë¥¼ phase ë¼ê³ í•¨ phaseëŠ” ì´ì „ ë‹¨ê³„ì— ëŒ€í•œ dependencyê°€ ìˆì–´ ì´ì „ ë‹¨ê³„ê°€ ìˆ˜í–‰ë˜ì–´ì•¼í•¨Goal Mavenì—ê²Œ ë™ì‘ì„ ìˆ˜í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ ì‹¤í–‰ ë°©ì‹, ì²´ì¸ í˜•íƒœë¡œ ì‹¤í–‰ ê°ê°ì˜ Phaseì— ì—°ê³„ëœ Goalì„ ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì„ Build ë¼ê³ í•¨Maven Configuration Filesettings.xml Maven ë¹Œë“œ íˆ´ê³¼ ê´€ë ¨í•œ ì„¤ì •íŒŒì¼ MAVEN_HOME/confg ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜ğŸ’¡ Maven ë¹Œë“œì‹œ í”ŒëŸ¬ê·¸ì¸ì„ ì¤‘ì•™ ì €ì¥ì†Œì—ì„œ ë¡œì»¬PCë¡œ ë‹¤ìš´ë¡œë“œí•˜ëŠ” default ê²½ë¡œëŠ”`USER_HOME/.m2/repository` ì´ë©°, settiings.xml ì—ì„œ ê²½ë¡œ ë³€ê²½ê°€ëŠ¥pom.xml í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì„¤ì •, ì˜ì¡´ì„± ë“±ì„ ì•Œ ìˆ˜ ìˆìŒ&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\t&lt;parent&gt;\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\t\t&lt;version&gt;2.2.4.RELEASE&lt;/version&gt;\t\t&lt;relativePath/&gt;\t&lt;/parent&gt;\t&lt;groupId&gt;com.god&lt;/groupId&gt; \t&lt;artifactId&gt;bo&lt;/artifactId&gt;\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\t&lt;packaging&gt;war&lt;/packaging&gt;\t&lt;name&gt;bo&lt;/name&gt;\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\t&lt;url&gt;http://goddaehee.tistory.com&lt;/url&gt;\t&lt;properties&gt;\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\t&lt;/properties&gt;\t&lt;dependencies&gt;\t\t&lt;dependency&gt;\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\t\t&lt;/dependency&gt;\t\t&lt;dependency&gt;\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\t\t&lt;/dependency&gt;\t\t&lt;dependency&gt;\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\t\t\t&lt;scope&gt;test&lt;/scope&gt;\t\t\t&lt;exclusions&gt;\t\t\t\t&lt;exclusion&gt;\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\t\t\t\t&lt;/exclusion&gt;\t\t\t&lt;/exclusions&gt;\t\t&lt;/dependency&gt;\t&lt;/dependencies&gt;\t&lt;build&gt;\t\t&lt;plugins&gt;\t\t\t&lt;plugin&gt;\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\t\t\t&lt;/plugin&gt;\t\t&lt;/plugins&gt;\t&lt;/build&gt;&lt;/project&gt;| modelVersion | POM model ë²„ì „ || â€” | â€” || parent | í”„ë¡œì íŠ¸ ê³„ì¸µì •ë³´ || parent.groupId | í”„ë¡œì íŠ¸ ìƒì„±ì¡°ì§ ê³ ìœ  ì•„ì´ë””. ì¼ë°˜ì ìœ¼ë¡œ ë„ë©”ì¸ ì´ë¦„ì„ ê±°ê¾¸ë¡œ ì ìŒ || parent.artifactId | í”„ë¡œì íŠ¸ ë¹Œë“œì‹œ íŒŒì¼ ëŒ€í‘œì´ë¦„. groupid ë‚´ì—ì„œ ìœ ì¼í•´ì•¼í•¨. Maven ë¹Œë“œì‹œ defaultë¡œ [artifactid]-[version]-[packaging].war ë¡œ ìƒì„± || parent.version | í”„ë¡œì íŠ¸ í˜„ì¬ ë²„ì „. ê°œë°œì¤‘ì¼ë•ŒëŠ” SNAPSHOT ì ‘ë¯¸ì‚¬ ì‚¬ìš© || packaging | íŒ¨í‚¤ì§• ìœ í˜•(jar, war, ear ë“±) || name | í”„ë¡œì íŠ¸ ì´ë¦„ || description | í”„ë¡œì íŠ¸ ê°„ëµ ì„¤ëª… || url | í”„ë¡œì íŠ¸ reference ì‚¬ì´íŠ¸ || properties | ë²„ì „ê´€ë¦¬ì— ìš©ì´í•¨. ìœ„ì— ì˜ˆì‹œì²˜ëŸ¼ ì„ ì–¸í•˜ê³ , dependencies ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©ê°€ëŠ¥ ${java.version} || dependencies | í”„ë¡œì íŠ¸ì™€ ì˜ì¡´ ê´€ê³„ì—ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ ê´€ë¦¬ || build | ë¹Œë“œì— ì‚¬ìš©í•  í”ŒëŸ¬ê·¸ì¸ ëª¨ìŒ |ReferenceMaven-integration-test[Maven] Maven ì´ë€? (ì •ì˜, ì˜ˆì œ)" }, { "title": "Spring Boot Cors ì •ì±… ì ìš©", "url": "/posts/spring_boot_cors/", "categories": "Web, Java, Spring Boot", "tags": "Web", "date": "2022-07-16 12:30:00 +0900", "snippet": "Spring Boot Corsí˜„ì¬ WebMvcConfigurerAdapterëŠ” Deprecated WebMvcConfigurerÂ ëŠ” ìë™êµ¬ì„±ëœ ìŠ¤í”„ë§ MVC êµ¬ì„±ì—Â Formatter,Â MessageConverterÂ ë“±ì„ ì¶”ê°€ë“±ë¡í•  ìˆ˜ ìˆë‹¤.Â WebMvcRegistrationsëŠ”Â RequestMappingHandlerMapping,Â RequestMappingHandlerAdapterì™€Â ExceptionHandlerExceptionResolverë¥¼ ì¬ì •ì˜í•  ë•Œ ì‚¬ìš©í•œë‹¤.WebMvcConfigurrì™€Â WebMvcRegistrationsÂ ì†ŒìŠ¤ë¥¼ ì‚´í´ë³´ë©´ ë©”ì„œë“œë“¤ì„Â defaultÂ ë©”ì„œë“œë¡œ ì„ ì–¸í–ˆë‹¤. í•„ìš”í•œ ë©”ì„œë“œë§Œ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•˜ë¼ëŠ” ì˜ë¯¸ë‹¤.Java7ì„ ì§€ì›í•˜ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ 1.5 ì—ì„œëŠ”Â [defaultÂ ë©”ì„œë“œ(https://goo.gl/A7CL31)](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)ê°€ ì—†ì—ˆê¸°ì—Â WebMvcConfigurerë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸ëœ ë©”ì„œë“œë¥¼ ëª¨ë‘ êµ¬í˜„í•´ì•¼ í–ˆë‹¤. ê·¸ëŸ° ë¶ˆí¸í•¨ì„ í•´ì†Œí•˜ê³ ìÂ WebMvcConfigurerAdapterÂ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ì œê³µí–ˆë‹¤. ì´ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ í•„ìš”í•œ ë©”ì„œë“œë§Œ ì˜¤ë²„ë¼ì´ë“œí–ˆë‹¤.ìŠ¤í”„ë§ ë¶€íŠ¸ 2.0ë¶€í„° Java8ê³¼ ìŠ¤í”„ë§ 5.0ì„ ì‚¬ìš©í•˜ë©´ì„œÂ WebMvcConfigurerÂ ë©”ì„œë“œì—Â defaultë¥¼ ì„ ì–¸í–ˆë‹¤. ê·¸ ë•ë¶„ì—Â WebMvcConfigurerë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ì—ì„œ ëª¨ë“  ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì•¼í•˜ëŠ” ê°•ì œë ¥ì´ ì‚¬ë¼ì¡Œë‹¤. ì“°ì„ìƒˆê°€ ì‚¬ë¼ì§„Â WebMvcConfigurerAdapterÂ í´ë˜ìŠ¤ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ 2.0ì—ì„œ ì œì™¸(Deprecated)ë˜ì—ˆë‹¤.Spring Boot Cors ì •ì±… í—ˆìš© WebSecurityConfigurerAdapterë¥¼ ìƒì†ë°›ê³ , Spring Securityê°€ ì ìš©ëœ WebSecirityConfig.java CorsConfigurationSourceë¥¼ ìŠ¤í”„ë§ Bean ë“±ë¡ addAllowedOrigin() CORS ì •ì±… ì ìš© registerCorsConfiguration(), ëª¨ë“  pathì— ëŒ€í•´ CORS ì •ì±… ì ìš©Exception ë°œìƒ ì‹œ CORS Header ì ìš©ì—¬ë¶€TestController.javapackage com.skt.scale.paas.server.controller;import org.springframework.http.HttpHeaders;import org.springframework.http.HttpStatus;import org.springframework.http.ResponseEntity;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.context.annotation.Configuration;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RestController;@Configuration@RestController@RequestMapping(\"/api\")public class TestController { @RequestMapping(value = \"/test/null\", method = RequestMethod.GET) public void resNull(String test) { throw new NullPointerException(); } @ExceptionHandler(NullPointerException.class) public ResponseEntity&lt;Object&gt; handleAll(Exception ex) { ex.printStackTrace(); return new ResponseEntity&lt;&gt;(ex.toString(), new HttpHeaders(), HttpStatus.INTERNAL_SERVER_ERROR); }}request ê²°ê³¼ NullPointerException ë°œìƒ ë° 500 ì—ëŸ¬ response origin, referer í—¤ë”ì— ë”°ë¥¸ CORS í—¤ë”ëŠ” ì •ìƒì ìœ¼ë¡œ ë°˜í™˜" } ]
